<div class="cycles-container">
  <mat-form-field class="search-field search-field-cycles">
    <input
      matInput
      [(ngModel)]="searchText"
      placeholder="Buscar curso, profesor o aula"
    />
    <mat-icon matPrefix>search</mat-icon>
  </mat-form-field>

  <div class="cycles-tabs-container">
    <mat-tab-group [(selectedIndex)]="selectedIndex" class="cycles-tabs">
      <mat-tab *ngFor="let cycle of cycles" [label]="cycle.name">
        <mat-accordion class="courses-accordion">
          <mat-expansion-panel
            *ngFor="let course of filterCourses(cycle)"
            class="course-panel"
          >
            <mat-expansion-panel-header>
              <mat-panel-title>
                <div class="course-item">
                  <mat-checkbox
                    (change)="toggleCourseSelection(course)"
                    [checked]="selectedCourses.has(course.id)"
                    (click)="$event.stopPropagation()"
                  ></mat-checkbox>
                  <span class="course-name">{{ course.name }}</span>
                  <span class="credits-badge">{{ course.credits }}</span>
                </div>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="groups-container">
              <div *ngFor="let group of course.groups" class="group-item">
                <div class="group-info">
                  <span class="group-number">Grupo {{ group.group }}</span>
                  <span class="group-teacher">{{ group.fullName }}</span>
                </div>
                <span class="group-classroom">{{ group.classRoom }}</span>
              </div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-tab>
    </mat-tab-group>

    <button
      mat-icon-button
      (click)="nextCycle()"
      [disabled]="selectedIndex === cycles.length - 1"
    ></button>
  </div>
</div>
