<div class="schedule-container">
  <div class="actions-container">
    <button
      mat-raised-button
      class="action-button generate-button"
      (click)="generateSchedule()"
    >
      <mat-icon>auto_awesome</mat-icon>
      Generar Horario
    </button>
    <app-export-buttons></app-export-buttons>
  </div>
  <table class="schedule-table">
    <thead>
      <tr>
        <th>Hora</th>
        <th *ngFor="let day of days">{{ day }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let time of timeSlots">
        <td class="time-cell">{{ time }}</td>
        <td
          *ngFor="let day of days"
          class="schedule-cell"
          [style.background-color]="getClass(day, time)?.color + '15'"
          [style.border-left-width.px]="getClass(day, time) ? 4 : 1"
          [style.border-left-color]="getClass(day, time)?.color"
          [attr.rowspan]="
            shouldShowCell(day, time)
              ? calculateClassSpan(getClass(day, time))
              : 1
          "
          [class.has-class]="getClass(day, time)"
          [class.hidden-cell]="!shouldShowCell(day, time)"
        >
          <ng-container *ngIf="getClass(day, time) as class">
            <div class="class-info">
              <div class="subject">{{ class.subject }}</div>
              <div class="time-range">
                {{ formatTimeRange(class.startTime, class.endTime) }}
              </div>
              <div class="professor">{{ class.professor }}</div>
              <div class="classroom">{{ class.classroom }}</div>
            </div>
          </ng-container>
        </td>
      </tr>
    </tbody>
  </table>
</div>
