<div class="schedule-container">
  <div class="header">
    <h1>Horario Generado</h1>
    <div class="header-actions" *ngIf="allCourses.length">
      <app-export-buttons></app-export-buttons>
      <button
        mat-raised-button
        (click)="regenerateSchedule()"
        class="regenerate-button"
        [disabled]="isLoading"
      >
        <mat-icon>{{ isLoading ? "pending" : "psychology" }}</mat-icon>
        {{ isLoading ? "Generando..." : "Generar Otro Horario" }}
      </button>
    </div>
  </div>

  <app-schedule
    *ngIf="allCourses.length; else noCourses"
    [allCourses]="allCourses"
  ></app-schedule>

  <ng-template #noCourses>
    <div class="no-courses">
      <mat-icon>warning</mat-icon>
      <p>No hay cursos seleccionados</p>
      <button mat-raised-button color="primary" routerLink="/course-selection">
        Seleccionar Cursos
      </button>
    </div>
  </ng-template>

  <div *ngIf="isLoading" class="loading-overlay">
    <mat-progress-spinner
      mode="indeterminate"
      diameter="50"
    ></mat-progress-spinner>
    <span>Generando nuevo horario con IA...</span>
  </div>
</div>
